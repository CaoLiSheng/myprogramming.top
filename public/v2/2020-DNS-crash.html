<!doctype html><html lang="cn-zh"><head><meta charset="UTF-8"/><meta http-equiv="pragma" content="no-cache"/><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/><meta name="viewport" content="user-scalable=0,width=device-width,initial-scale=1"><title>记一次DNS服务崩溃事件</title><script> var _hmt = _hmt || []; (function () { var hm = document.createElement('script'); hm.src = 'https://hm.baidu.com/hm.js?f402a68d651d46513a3688a8d07eb93c'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(hm, s); })(); </script><link rel="stylesheet" href="bountiful.8f3594e2e2.css"/></head><body><div id="article" style="display:none;"><article class="markdown-body"><h1>记一次DNS服务崩溃事件</h1><h6 class="date-tag"><code> ~~ 更新于 -> 2020-09-03</code></h6><p>大概是在昨天（2020 年 9 月 2 日）晚上发现必应搜索打不开，提示浏览器收到的数字证书不对；紧接着打开百度和搜狗都跳转到一个叫传奇的游戏的落地页。我最初怀疑局域网里有设备中招了，ARP 攻击。但是后来发现，连局域网状态下，百度域名解析到的 IP 地址，在手机的 4G 网络下同样跳转到传奇。我尝试用 curl 访问这个 IP 地址，果然 302 了。似乎公共的 DNS 一起中招了，阿里的好一点，必应中国还能用。最终我换上了本省本服务商的 DNS；写这篇文章之前，我又查看了下 114DNS 的解析结果，已经恢复正常了。</p><pre><code class="shell language-shell">host hostname [server]

nslookup name [server]
</code></pre><figure><img alt="已恢复" src="../resources/2020-DNS-crash/recovered.png" title="已经恢复正常的解析结果" width="100%" height="auto" /><figcaption>已经恢复正常的解析结果</figcaption></figure><hr /><p>以下照片中 <code>118.107.13.135</code> 就是出问题的 DNS 所指向的错误 IP 地址：</p><figure><img alt="错误中" src="../resources/2020-DNS-crash/aterror2.jpeg" title="连手机热点是没有解析到这个错误 IP 地址的" width="100%" height="auto" /><figcaption>连手机热点是没有解析到这个错误 IP 地址的</figcaption></figure><figure><img alt="错误中" src="../resources/2020-DNS-crash/aterror3.jpeg" title="这时使用的是阿里 DNS，必应中国似乎在这里幸免于难" width="100%" height="auto" /><figcaption>这时使用的是阿里 DNS，必应中国似乎在这里幸免于难</figcaption></figure><figure><img alt="错误中" src="../resources/2020-DNS-crash/aterror4.jpeg" title="正常的搜狗解析和错误的搜狗解析" width="100%" height="auto" /><figcaption>正常的搜狗解析和错误的搜狗解析</figcaption></figure><br /><br /><hr /><br /><div class="comments"><a href="mailto:954382491@qq.com?subject=评价「记一次DNS服务崩溃事件」">发邮件~来评价~一下吧</a><h6 class="tip">⚠️ 请先安装一款邮件软件（部分浏览器可能不支持，请使用设备默认浏览器打开本页面）</h6></div><br /></article></div><script>var temp = document.getElementById('article'); window.ARTICLE = temp.innerHTML; document.body.removeChild(temp);</script><div id="app"></div><script src="./app~31ecd969.e8011e0df46db977ea0f.js"></script><script src="./app~55ff73d6.e8011e0df46db977ea0f.js"></script></body></html>